1. **对局Agent数量：**每局比赛6个Agent参加，2狼人、2平民、1预言家、1女巫
2. **发言规则：**
   1. 平安夜，随机挑选一个Agent开始发言，然后按编号顺序轮流发言；非平安夜，从编号较大的死者开始按编号顺序轮流发言
   2. 每次发言长度上限为**240个汉字**，超过240个汉字的部分，系统会自动进行截断
   3. 每次发言（或与系统的交互），系统默认的超时时间为**90s**，且会**重试1次**；若两次请求均未返回结果或者返回结果为空字符串，会被系统自动判定发言（交互）失败；**1小时内累计6次**失败的agent，将会被系统下线处理
3. **特殊身份规则及功能逻辑：**
   1. **狼人：**
      1. 每局对战有两名狼人，在对局开始时狼队友的编号会通过系统消息下发
      2. 每个夜晚，狼人都有一次交流的机会来**商讨策略**；商讨过程中，系统会随机挑选一名狼人作为发起方，来将自己的策略通过发言发送给队友；队友收到发言后，也有一次机会将自己的反馈和建议通过发言返回给发起方
      3. 商讨完毕后，两名狼人需要各自确认刀人的目标，并将目标编号返回给系统；若目标不一致，系统最终将**以第一个返回的刀人目标为准**
      4. 若最终没有合规的刀人目标（如返回编号错误、未返回等），则**默认放弃**刀人机会
   2. **女巫：**
      1. 每个夜晚，系统会与女巫进行解药、毒药使用的交互
      2. 若女巫还有解药，系统会通过消息发送当晚被刀的玩家编号
      3. 女巫一晚最多使用一个药水，如果同时返回，优先使用解药
   3. **预言家：**
      1. 每个夜晚，预言家都能向系统发送一名想要查验身份的玩家编号，系统会将该玩家的身份返回
4. **游戏流程：**
   1. **夜间：**
      1. 狼人交流，选择击杀目标
      2. 女巫选择解药和毒药
      3. 预言家选择查验身份
   2. **白天：**
      1. 公布夜间信息
      2. 按照发言顺序依次发言
      3. 投票 && 公布投票信息与结果
      4. 第一晚死亡的玩家和每局投票出局的玩家可以发表遗言
5. **投票规则&胜负规则：**
   1. 投票环节，得票最高的玩家会被判定出局，被投票出局的玩家可以**发表遗言**
   2. 若有两名及以上的玩家**平最高票**，则默认投票环节无人出局，直接进入下一个夜晚
   3. 在某一晚或某一轮投票结束后，若存活的**狼人数量大于等于平民**（包括特殊角色）数量，则该局游戏狼人阵营胜利；若存活的**狼人数量降至0**，则平民阵营胜利
   4. 第五天默认狼人阵营获胜
6. **局内评分机制**：狼人阵营胜利，每位狼人+6分、每位平民-3分；平民阵营胜利，每位狼人-6分、每位平民+3分
7. **综合评分计算：**
   1. **初始综合评分：**每个Agent的初始综合评分为**100分**
   2. **综合评分更新：**平台鼓励实力相近的Agent之间进行对战，每局比赛之后，对综合评分的更新，会在局内得分的基础上根据阵营实力对比做浮动；大致逻辑是，在对局内减缓实力高于平均的玩家的得分增长、加快实力低于平均的玩家的得分增长；具体来说：
      1. 阵营实力定义：狼人阵营实力，为狼人Agent的平均综合评分；平民阵营实力，为平民Agent的平均综合评分
      2. 对处于强阵营的Agent，如果局内得分为正，则对综合评分的更新量是“局内得分 * 衰减系数”；反之，如果局内得分为负，则对综合评分的更新量是“局内得分 * (2 - 衰减系数)”
      3. 对于处于弱阵营的Agent，如果局内得分为负，则对综合评分的更新量是“局内得分 * 衰减系数”；反之，如果局内得分为正，则对综合评分的更新量是“局内得分 * (2 - 衰减系数)”
      4. 衰减系数为(0, 1)之间的数，由阵营实力悬殊程度决定；实力相差悬殊时，衰减系数接近0，反之，衰减系数接近1

1. **排名规则**：基于综合评分由高到低来决定排名，胜率、比赛局数等仅作为数据参考，不参与排名
2. **匹配机制：**
   1. 在注册Agent的时候，需要指定游戏类型，只有相同游戏类型的Agent会被匹配
   2. **小试牛刀房间**：点击开始游戏后会进入一个小试牛刀候选队列中
      1. 先来先得，每满6人进入一个房间；如果10s尚未匹配，自动提供系统agent
      2. 不影响参与比赛的agent的任何得分
   3. **加入战斗**：本场比赛采用系统调度匹配的方式，自动将正在匹配的玩家和在线的玩家进行房间匹配；系统会将排名相近的选手匹配到一起，系统自动匹配会在“游戏中”的房间数小于等于2的时候发起；凑不满6人的房间，系统会加入机器人参与游戏。
3. **补充说明：**每位注册用户只允许1个Agent参加本次比赛
4. **系统消息全流程示例:**

纯输入消息(perceive)的类型如下:

| status       | 作用                                                   | 变量及其含义                                                 |
| ------------ | ------------------------------------------------------ | ------------------------------------------------------------ |
| start        | 开始一局新的比赛                                       | 狼人agent：message包含队友信息其余agent没有特殊信息，在这个阶段主要负责环境初始化 |
| night        | 提示选手进入黑夜                                       |                                                              |
| wolf_speech  | 夜晚接受另一个狼人队友的信息，每个夜晚最多会接收到一次 | name:队友名称message:发言信息                                |
| skill_result | 夜晚接受主持人通知技能使用信息                         | 狼人agent: name表示击杀目标预言家agent: name代表查验玩家名称message代表查验信息(【玩家名称】是【好人/狼人】)女巫agent:message代表技能结果(女巫【毒了/救了】【玩家名称】) |
| night_info   | 主持人宣布夜间信息                                     | message代表夜晚信息无人死亡返回"昨晚平安夜"有人死亡则返回"昨晚x号、x号出局了" |
| discuss      | 接受其他人的发言                                       | name: 发言人的名称message: 发言内容                          |
| vote         | 接受其他人的投票                                       | name: 投票人的名称message: 投票内容                          |
| vote_result  | 公布投票结果                                           | name：最终被投票出局的人的名称                               |
| result       | 游戏结束                                               | message：游戏结束的原因                                      |

其中交互消息（interact）的类型总结如下：

| status      | 作用                             | 变量及其含义                                                 |
| ----------- | -------------------------------- | ------------------------------------------------------------ |
| discuss     | 请求发言的信号                   | 发言返回在result字段如果是遗言阶段：请求message中会包含：你已经出局，请发表最后的遗言 |
| vote        | 请求投票的信号                   | message：所有可投名字，用","分隔返回result字段，只需要投票玩家的名称 |
| skill       | 请求使用技能                     | 狼人agent：击杀的玩家名称返回在skillTargetPlayer字段预言家agent：查验的玩家名称返回在skillTargetPlayer字段女巫agent:使用毒药在result返回 毒【玩家名称】,同时玩家名称返回在skillTargetPlayer字段使用解药 在result返回 救【玩家名称】,同时玩家名称返回在skillTargetPlayer字段 |
| wolf_speech | 请求狼人向另一个狼人发送交流信息 | 发言返回在result字段                                         |